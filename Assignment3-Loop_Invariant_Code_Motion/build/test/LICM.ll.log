PLEASE submit a bug report to https://bugs.llvm.org/ and include the crash backtrace.
Stack dump:
0.	Program arguments: opt-12 -S -load lib/libLICM.so -loop-invariant-code-motion ../test/LICM.ll -o LICM_opt.ll
1.	Running pass 'Function Pass Manager' on module '../test/LICM.ll'.
2.	Running pass 'Loop Pass Manager' on function '@foo'
3.	Running pass 'Loop Invariant Code Motion' on basic block '%3'
Stack dump without symbol names (ensure you have llvm-symbolizer in your PATH or set the environment var `LLVM_SYMBOLIZER_PATH` to point to it):
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamEi+0x31)[0x7f86fbbb3871]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm3sys17RunSignalHandlersEv+0x50)[0x7f86fbbb19a0]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(+0xd26f82)[0x7f86fbbb3f82]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x14420)[0x7f86fae7e420]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZNK4llvm13DominatorTree9dominatesEPKNS_11InstructionEPKNS_10BasicBlockE+0x3e)[0x7f86fbc8592e]
lib/libLICM.so(+0x28353)[0x7f86f89c5353]
lib/libLICM.so(+0x2853c)[0x7f86f89c553c]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm13LPPassManager13runOnFunctionERNS_8FunctionE+0x558)[0x7f86fccc8df8]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm13FPPassManager13runOnFunctionERNS_8FunctionE+0x3a0)[0x7f86fbce74f0]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm13FPPassManager11runOnModuleERNS_6ModuleE+0x33)[0x7f86fbced0a3]
/lib/x86_64-linux-gnu/libLLVM-12.so.1(_ZN4llvm6legacy15PassManagerImpl3runERNS_6ModuleE+0x3a8)[0x7f86fbce7af8]
opt-12(main+0x2fcf)[0x4328bf]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x7f86fa950083]
opt-12(_start+0x2e)[0x41e68e]
